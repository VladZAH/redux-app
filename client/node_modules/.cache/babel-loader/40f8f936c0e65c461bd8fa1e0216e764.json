{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/volodymyr/ReactProjects/BLOG/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AppBar,Avatar,Button,Toolbar,Typography}from'@material-ui/core';import{useDispatch}from'react-redux';import useStyles from'./styles';import decode from'jwt-decode';import lifeHacks from'../../images/lifehacksLogo.png';import{Link,useHistory,useLocation}from'react-router-dom';import*as actionType from'../../constants/actionTypes';var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var history=useHistory();var location=useLocation();var logout=function logout(){dispatch({type:actionType.LOGOUT});history.push('/auth');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsx(\"div\",{className:classes.brandContainer,children:/*#__PURE__*/_jsx(Typography,{component:Link,to:\"/\",className:classes.heading,variant:\"h3\",align:\"center\",children:/*#__PURE__*/_jsx(\"img\",{src:lifeHacks,alt:\"memories\",height:\"60\"})})}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl,children:user===null||user===void 0?void 0:user.result.name.charAt(0)}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user===null||user===void 0?void 0:user.result.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout,children:\"Log Out\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]});};export default Navbar;","map":{"version":3,"sources":["/Users/volodymyr/ReactProjects/BLOG/client/src/components/Navbar/Navbar.js"],"names":["React","useState","useEffect","AppBar","Avatar","Button","Toolbar","Typography","useDispatch","useStyles","decode","lifeHacks","Link","useHistory","useLocation","actionType","Navbar","classes","JSON","parse","localStorage","getItem","user","setUser","dispatch","history","location","logout","type","LOGOUT","push","token","decodedToken","exp","Date","getTime","appBar","brandContainer","heading","toolbar","result","profile","purple","name","imageUrl","charAt","userName"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { AppBar, Avatar, Button, Toolbar, Typography } from '@material-ui/core';\nimport {useDispatch} from 'react-redux';\nimport useStyles from './styles';\nimport decode from 'jwt-decode';\nimport lifeHacks from '../../images/lifehacksLogo.png'\nimport { Link, useHistory, useLocation } from 'react-router-dom'\nimport * as actionType from '../../constants/actionTypes';\n\nconst Navbar = () => {\n    const classes = useStyles();\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const location = useLocation();\n\n    const logout = () => {\n        dispatch({ type: actionType.LOGOUT });\n\n        history.push('/auth');\n        setUser(null);\n    };\n\n    useEffect(() => {\n        const token = user?.token;\n\n        if (token) {\n            const decodedToken = decode(token);\n      \n            if (decodedToken.exp * 1000 < new Date().getTime()) logout();\n        }\n\n        setUser(JSON.parse(localStorage.getItem('profile')));\n    }, [location]);\n\n    return (\n        <AppBar className={classes.appBar} position='static' color='inherit'>\n            <div className={classes.brandContainer}> \n                <Typography component={Link} to='/' className={classes.heading} variant='h3' align='center'>\n                    <img src={lifeHacks} alt='memories' height='60' />\n                </Typography>\n            </div>\n            <Toolbar className={classes.toolbar}>\n                {user?.result ? (\n                    <div className={classes.profile}>\n                        <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\n                        <Typography className={classes.userName} variant='h6'>{user?.result.name}</Typography>\n                        <Button variant='contained' className={classes.logout} color=\"secondary\" onClick={logout}>Log Out</Button>\n                    </div>\n                ) : (\n                    <Button component={Link} to=\"/auth\" variant=\"contained\" color='primary'>Sign In</Button>\n                )}\n            </Toolbar>\n        </AppBar>\n    );\n}\n\nexport default Navbar"]},"metadata":{},"sourceType":"module"}